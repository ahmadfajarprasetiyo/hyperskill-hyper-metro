type: edu
files:
  - name: src/metro/Main.java
    visible: true
    text: |
      package metro;
      
      public class Main {
          public static void main(String[] args) {
              System.out.println("Hello, world!");
          }
      }
    learner_created: false
  - name: test/lausanne.json
    visible: false
    text: |-
      {
        "m1": {
          "1": {
            "name": "Renes—Gare",
            "transfer": [],
            "time": 3
          },
          "2": {
            "name": "Epenex",
            "transfer": [],
            "time": 2
          },
          "3": {
            "name": "Crochy",
            "transfer": [],
            "time": 6
          },
          "4": {
            "name": "Cerisaie",
            "transfer": [],
            "time": 5
          },
          "5": {
            "name": "Bassenges",
            "transfer": [],
            "time": 4
          },
          "6": {
            "name": "EPFL",
            "transfer": [],
            "time": 6
          },
          "7": {
            "name": "UNL—Sorge",
            "transfer": [],
            "time": 8
          },
          "8": {
            "name": "Mouline",
            "transfer": [],
            "time": 5
          },
          "9": {
            "name": "UNL—Chemberonne",
            "transfer": [],
            "time": 4
          },
          "10": {
            "name": "Bourdonnette",
            "transfer": [],
            "time": 5
          },
          "11": {
            "name": "Melley",
            "transfer": [],
            "time": 7
          },
          "12": {
            "name": "Provence",
            "transfer": [],
            "time": 6
          },
          "13": {
            "name": "Montelly",
            "transfer": [],
            "time": 5
          },
          "14": {
            "name": "Vigie",
            "transfer": [],
            "time": 4
          },
          "15": {
            "name": "Lausanne—Flon",
            "transfer": [],
            "time": null
          }
        },
        "m2": {
          "1": {
            "name": "Croisettes",
            "transfer": [],
            "time": 6
          },
          "2": {
            "name": "Vennes",
            "transfer": [],
            "time": 5
          },
          "3": {
            "name": "Fourmi",
            "transfer": [],
            "time": 4
          },
          "4": {
            "name": "Sallaz",
            "transfer": [],
            "time": 6
          },
          "5": {
            "name": "CHUV",
            "transfer": [],
            "time": 5
          },
          "6": {
            "name": "Ours",
            "transfer": [],
            "time": 3
          },
          "7": {
            "name": "Riponne M.Bejart",
            "transfer": [],
            "time": 4
          },
          "8": {
            "name": "Bessieres",
            "transfer": [],
            "time": 6
          },
          "9": {
            "name": "Lausanne—Flon",
            "transfer": [],
            "time": 5
          },
          "10": {
            "name": "Lausanne Gare CFF",
            "transfer": [],
            "time": 3
          },
          "11": {
            "name": "Grancy",
            "transfer": [],
            "time": 4
          },
          "12": {
            "name": "Delices",
            "transfer": [],
            "time": 6
          },
          "13": {
            "name": "Jourdils",
            "transfer": [],
            "time": 3
          },
          "14": {
            "name": "Ouchy—Olympique",
            "transfer": [],
            "time": null
          }
        }
      }
    learner_created: false
  - name: test/prague.json
    visible: false
    text: |-
      {
        "Linka A": {
          "1": {
            "name": "Nemocnice Motol" ,
            "transfer": []
          } ,
          "2": {
            "name": "Petriny" ,
            "transfer": []
          } ,
          "3": {
            "name": "Nadrazi Veleslavin" ,
            "transfer": []
          } ,
          "4": {
            "name": "Borislavka" ,
            "transfer": []
          } ,
          "5": {
            "name": "Dejvicka" ,
            "transfer": []
          } ,
          "6": {
            "name": "Hradcanska" ,
            "transfer": []
          } ,
          "7": {
            "name": "Malostranska" ,
            "transfer": []
          } ,
          "8": {
            "name": "Staromestska" ,
            "transfer": []
          } ,
          "9": {
            "name": "Mustek" ,
            "transfer": [
              {
                "line": "Linka B" ,
                "station": "Mustek"
              }
            ]
          } ,
          "10": {
            "name": "Muzeum" ,
            "transfer": [
              {
                "line": "Linka C" ,
                "station": "Muzeum"
              }
            ]
          } ,
          "11": {
            "name": "Namesti Miru" ,
            "transfer": []
          } ,
          "12": {
            "name": "Jiriho z Podebrad" ,
            "transfer": []
          } ,
          "13": {
            "name": "Flora" ,
            "transfer": []
          } ,
          "14": {
            "name": "Zelivskeho" ,
            "transfer": []
          } ,
          "15": {
            "name": "Strasnicka" ,
            "transfer": []
          } ,
          "16": {
            "name": "Skalka" ,
            "transfer": []
          } ,
          "17": {
            "name": "Depo Hostivar" ,
            "transfer": []
          }
        } ,
        "Linka B": {
          "1": {
            "name": "Cerny Most" ,
            "transfer": []
          } ,
          "2": {
            "name": "Rajska zahrada" ,
            "transfer": []
          } ,
          "3": {
            "name": "Hloubetin" ,
            "transfer": []
          } ,
          "4": {
            "name": "Kolbenova" ,
            "transfer": []
          } ,
          "5": {
            "name": "Vysocanska" ,
            "transfer": []
          } ,
          "6": {
            "name": "Ceskomoravska" ,
            "transfer": []
          } ,
          "7": {
            "name": "Palmovka" ,
            "transfer": []
          } ,
          "8": {
            "name": "Invalidovna" ,
            "transfer": []
          } ,
          "9": {
            "name": "Krizikova" ,
            "transfer": []
          } ,
          "10": {
            "name": "Florenc" ,
            "transfer": [
              {
                "line": "Linka C" ,
                "station": "Florenc"
              }
            ]
          } ,
          "11": {
            "name": "Namesti Republiky" ,
            "transfer": []
          } ,
          "12": {
            "name": "Mustek" ,
            "transfer": [
              {
                "line": "Linka B" ,
                "station": "Mustek"
              }
            ]
          } ,
          "13": {
            "name": "Narodni trida" ,
            "transfer": []
          } ,
          "14": {
            "name": "Karlovo namesti" ,
            "transfer": []
          } ,
          "15": {
            "name": "Andel" ,
            "transfer": []
          } ,
          "16": {
            "name": "Smichovske nadrazi" ,
            "transfer": []
          } ,
          "17": {
            "name": "Radlicka" ,
            "transfer": []
          } ,
          "18": {
            "name": "Jinonice" ,
            "transfer": []
          } ,
          "19": {
            "name": "Nove Butovice" ,
            "transfer": []
          } ,
          "20": {
            "name": "Hurka" ,
            "transfer": []
          } ,
          "21": {
            "name": "Luziny" ,
            "transfer": []
          } ,
          "22": {
            "name": "Luka" ,
            "transfer": []
          } ,
          "23": {
            "name": "Stodulky" ,
            "transfer": []
          } ,
          "24": {
            "name": "Zlicin" ,
            "transfer": []
          }
        } ,
        "Linka C": {
          "1": {
            "name": "Letnany" ,
            "transfer": []
          } ,
          "2": {
            "name": "Prosek" ,
            "transfer": []
          } ,
          "3": {
            "name": "Strizkov" ,
            "transfer": []
          } ,
          "4": {
            "name": "Ladvi" ,
            "transfer": []
          } ,
          "5": {
            "name": "Kobylisy" ,
            "transfer": []
          } ,
          "6": {
            "name": "Nadrazi Holesovice" ,
            "transfer": []
          } ,
          "7": {
            "name": "Vltavska" ,
            "transfer": []
          } ,
          "8": {
            "name": "Florenc" ,
            "transfer": [
              {
                "line": "Linka B" ,
                "station": "Florenc"
              }
            ]
          } ,
          "9": {
            "name": "Hlavni nadrazi" ,
            "transfer": []
          } ,
          "10": {
            "name": "Muzeum" ,
            "transfer": [
              {
                "line": "Linka A" ,
                "station": "Muzeum"
              }
            ]
          } ,
          "11": {
            "name": "I.P.Pavlova" ,
            "transfer": []
          } ,
          "12": {
            "name": "Vysehrad" ,
            "transfer": []
          } ,
          "13": {
            "name": "Prazskeho povstani" ,
            "transfer": []
          } ,
          "14": {
            "name": "Pankrac" ,
            "transfer": []
          } ,
          "15": {
            "name": "Budejovicka" ,
            "transfer": []
          } ,
          "16": {
            "name": "Kacerov" ,
            "transfer": []
          } ,
          "17": {
            "name": "Roztyly" ,
            "transfer": []
          } ,
          "18": {
            "name": "Chodov" ,
            "transfer": []
          } ,
          "19": {
            "name": "Opatov" ,
            "transfer": []
          } ,
          "20": {
            "name": "Haje" ,
            "transfer": []
          }
        }
      }
    learner_created: false
  - name: test/prague_w_time.json
    visible: false
    text: |-
      {
        "Linka A": {
          "0": {
            "name": "Nemocnice Motol",
            "transfer": [],
            "time": 5
          },
          "1": {
            "name": "Petriny",
            "transfer": [],
            "time": 5
          },
          "2": {
            "name": "Nadrazi Veleslavin",
            "transfer": [],
            "time": 3
          },
          "3": {
            "name": "Borislavka",
            "transfer": [],
            "time": 3
          },
          "4": {
            "name": "Dejvicka",
            "transfer": [],
            "time": 4
          },
          "5": {
            "name": "Hradcanska",
            "transfer": [],
            "time": 4
          },
          "6": {
            "name": "Malostranska",
            "transfer": [],
            "time": 1
          },
          "7": {
            "name": "Staromestska",
            "transfer": [],
            "time": 7
          },
          "8": {
            "name": "Mustek",
            "transfer": [
              {
                "line": "Linka B",
                "station": "Mustek"
              }
            ],
            "time": 8
          },
          "9": {
            "name": "Muzeum",
            "transfer": [
              {
                "line": "Linka C",
                "station": "Muzeum"
              }
            ],
            "time": 5
          },
          "10": {
            "name": "Namesti Miru",
            "transfer": [],
            "time": 7
          },
          "11": {
            "name": "Jiriho z Podebrad",
            "transfer": [],
            "time": 5
          },
          "12": {
            "name": "Flora",
            "transfer": [],
            "time": 7
          },
          "13": {
            "name": "Zelivskeho",
            "transfer": [],
            "time": 1
          },
          "14": {
            "name": "Strasnicka",
            "transfer": [],
            "time": 7
          },
          "15": {
            "name": "Skalka",
            "transfer": [],
            "time": 2
          },
          "16": {
            "name": "Depo Hostivar",
            "transfer": [],
            "time": null
          }
        },
        "Linka B": {
          "0": {
            "name": "Cerny Most",
            "transfer": [],
            "time": 3
          },
          "1": {
            "name": "Rajska zahrada",
            "transfer": [],
            "time": 5
          },
          "2": {
            "name": "Hloubetin",
            "transfer": [],
            "time": 4
          },
          "3": {
            "name": "Kolbenova",
            "transfer": [],
            "time": 1
          },
          "4": {
            "name": "Vysocanska",
            "transfer": [],
            "time": 6
          },
          "5": {
            "name": "Ceskomoravska",
            "transfer": [],
            "time": 5
          },
          "6": {
            "name": "Palmovka",
            "transfer": [],
            "time": 7
          },
          "7": {
            "name": "Invalidovna",
            "transfer": [],
            "time": 5
          },
          "8": {
            "name": "Krizikova",
            "transfer": [],
            "time": 1
          },
          "9": {
            "name": "Florenc",
            "transfer": [
              {
                "line": "Linka C",
                "station": "Florenc"
              }
            ],
            "time": 5
          },
          "10": {
            "name": "Namesti Republiky",
            "transfer": [],
            "time": 3
          },
          "11": {
            "name": "Mustek",
            "transfer": [
              {
                "line": "Linka A",
                "station": "Mustek"
              }
            ],
            "time": 7
          },
          "12": {
            "name": "Narodni trida",
            "transfer": [],
            "time": 3
          },
          "13": {
            "name": "Karlovo namesti",
            "transfer": [],
            "time": 4
          },
          "14": {
            "name": "Andel",
            "transfer": [],
            "time": 3
          },
          "15": {
            "name": "Smichovske nadrazi",
            "transfer": [],
            "time": 3
          },
          "16": {
            "name": "Radlicka",
            "transfer": [],
            "time": 4
          },
          "17": {
            "name": "Jinonice",
            "transfer": [],
            "time": 7
          },
          "18": {
            "name": "Nove Butovice",
            "transfer": [],
            "time": 2
          },
          "19": {
            "name": "Hurka",
            "transfer": [],
            "time": 7
          },
          "20": {
            "name": "Luziny",
            "transfer": [],
            "time": 5
          },
          "21": {
            "name": "Luka",
            "transfer": [],
            "time": 6
          },
          "22": {
            "name": "Stodulky",
            "transfer": [],
            "time": 7
          },
          "23": {
            "name": "Zlicin",
            "transfer": [],
            "time": null
          }
        },
        "Linka C": {
          "0": {
            "name": "Letnany",
            "transfer": [],
            "time": 3
          },
          "1": {
            "name": "Prosek",
            "transfer": [],
            "time": 7
          },
          "2": {
            "name": "Strizkov",
            "transfer": [],
            "time": 5
          },
          "3": {
            "name": "Ladvi",
            "transfer": [],
            "time": 4
          },
          "4": {
            "name": "Kobylisy",
            "transfer": [],
            "time": 5
          },
          "5": {
            "name": "Nadrazi Holesovice",
            "transfer": [],
            "time": 7
          },
          "6": {
            "name": "Vltavska",
            "transfer": [],
            "time": 2
          },
          "7": {
            "name": "Florenc",
            "transfer": [
              {
                "line": "Linka B",
                "station": "Florenc"
              }
            ],
            "time": 7
          },
          "8": {
            "name": "Hlavni nadrazi",
            "transfer": [],
            "time": 2
          },
          "9": {
            "name": "Muzeum",
            "transfer": [
              {
                "line": "Linka A",
                "station": "Muzeum"
              }
            ],
            "time": 5
          },
          "10": {
            "name": "I.P.Pavlova",
            "transfer": [],
            "time": 5
          },
          "11": {
            "name": "Vysehrad",
            "transfer": [],
            "time": 4
          },
          "12": {
            "name": "Prazskeho povstani",
            "transfer": [],
            "time": 7
          },
          "13": {
            "name": "Pankrac",
            "transfer": [],
            "time": 5
          },
          "14": {
            "name": "Budejovicka",
            "transfer": [],
            "time": 5
          },
          "15": {
            "name": "Kacerov",
            "transfer": [],
            "time": 4
          },
          "16": {
            "name": "Roztyly",
            "transfer": [],
            "time": 7
          },
          "17": {
            "name": "Chodov",
            "transfer": [],
            "time": 6
          },
          "18": {
            "name": "Opatov",
            "transfer": [],
            "time": 5
          },
          "19": {
            "name": "Haje",
            "transfer": [],
            "time": null
          }
        }
      }
    learner_created: false
  - name: test/Tests.java
    visible: false
    text: |-
      import org.hyperskill.hstest.dynamic.DynamicTest;
      import org.hyperskill.hstest.exception.outcomes.WrongAnswer;
      import org.hyperskill.hstest.stage.StageTest;
      import org.hyperskill.hstest.testcase.CheckResult;
      import org.hyperskill.hstest.testing.TestedProgram;
      
      public class Tests extends StageTest<String> {
          // multiple line output
          @DynamicTest(order = 1)
          CheckResult multipleLineOutputTest() {
      
              TestedProgram main = new TestedProgram();
              main.feedbackOnException(OutOfMemoryError.class, "Your program threw and OutOfMemoryError. Most likely it is related to the implementation of pathfinding algorithm.");
              main.start("./test/lausanne.json");
              String output = main.execute("/output \"m1\"").trim();
      
              String[] stations = new String[]{"Renes—Gare", "Epenex", "Crochy", "Cerisaie",
                  "Bassenges", "EPFL", "UNL—Sorge", "Mouline", "UNL—Chemberonne", "Bourdonnette", "Melley",
                  "Provence", "Montelly", "Vigie", "Lausanne—Flon"};
      
              checkDepots(output);
              checkOutputLength(output, stations.length + 2);
              assertStations(output, stations);
      
              stations = new String[]{"Croisettes", "Vennes", "Fourmi", "Sallaz", "CHUV", "Ours",
                  "Riponne M.Bejart", "Bessieres", "Lausanne—Flon", "Lausanne Gare CFF", "Grancy", "Delices", "Jourdils",
                  "Ouchy—Olympique"};
      
              output = main.execute("/output \"m2\"");
              checkDepots(output);
              checkOutputLength(output, stations.length + 2);
              assertStations(output, stations);
      
              return CheckResult.correct();
          }
      
          // addition test
          @DynamicTest(order = 2)
          CheckResult additionTest() {
      
              TestedProgram main = new TestedProgram();
              main.feedbackOnException(OutOfMemoryError.class, "Your program threw and OutOfMemoryError. Most likely it is related to the implementation of pathfinding algorithm.");
              main.start("./test/lausanne.json");
      
              // added a station to the end of the line
              main.execute("/append \"m1\" \"Test station 1\"");
              String output = main.execute("/output \"m1\"");
      
              String[] stations = new String[]{"Renes—Gare", "Epenex", "Crochy", "Cerisaie",
                  "Bassenges", "EPFL", "UNL—Sorge", "Mouline", "UNL—Chemberonne", "Bourdonnette", "Melley",
                  "Provence", "Montelly", "Vigie", "Lausanne—Flon", "Test station 1"};
      
              checkDepots(output);
              checkOutputLength(output, stations.length + 2);
              assertStations(output, stations);
      
              // added another one
              main.execute("/append \"m1\" \"Test station 2\"");
              output = main.execute("/output \"m1\"");
      
              stations = new String[]{"Renes—Gare", "Epenex", "Crochy", "Cerisaie",
                  "Bassenges", "EPFL", "UNL—Sorge", "Mouline", "UNL—Chemberonne", "Bourdonnette", "Melley",
                  "Provence", "Montelly", "Vigie", "Lausanne—Flon", "Test station 1", "Test station 2"};
      
              checkDepots(output);
              checkOutputLength(output, stations.length + 2);
              assertStations(output, stations);
      
              // added one station to the beginning of the line
              main.execute("/add-head \"m1\" \"Head\"");
              output = main.execute("/output \"m1\"");
      
              stations = new String[]{"Head", "Renes—Gare", "Epenex", "Crochy", "Cerisaie",
                  "Bassenges", "EPFL", "UNL—Sorge", "Mouline", "UNL—Chemberonne", "Bourdonnette", "Melley",
                  "Provence", "Montelly", "Vigie", "Lausanne—Flon", "Test station 1", "Test station 2"};
      
              checkDepots(output);
              checkOutputLength(output, stations.length + 2);
              assertStations(output, stations
              );
      
              return CheckResult.correct();
          }
      
          // not existing file check
          @DynamicTest(order = 3)
          CheckResult nonexistingFileTest() {
              TestedProgram main = new TestedProgram();
              main.feedbackOnException(OutOfMemoryError.class, "Your program threw and OutOfMemoryError. Most likely it is related to the implementation of pathfinding algorithm.");
              String output = main.start("tHiS_fIlE_DoEs_nOt_ExIsT.txt");
              if (output.trim().length() == 0) {
                  return CheckResult.wrong("The program did not print anything when the file was not exist. ");
              }
              if (output.toLowerCase().startsWith("depot") || output.toLowerCase().endsWith("depot")) {
                  return CheckResult.wrong("It looks like the program did not print an error message when the file was not exist.");
              }
              return CheckResult.correct();
          }
      
          // output with transfers
          @DynamicTest(order = 4)
          CheckResult outputLineWithTransfer() {
              TestedProgram main = new TestedProgram();
              main.feedbackOnException(OutOfMemoryError.class, "Your program threw and OutOfMemoryError. Most likely it is related to the implementation of pathfinding algorithm.");
              main.start("./test/prague.json");
      
              String[][] stations = new String[][]{
                  {"Nemocnice Motol", null},
                  {"Petriny", null},
                  {"Nadrazi Veleslavin", null},
                  {"Borislavka", null},
                  {"Dejvicka", null},
                  {"Hradcanska", null},
                  {"Malostranska", null},
                  {"Staromestska", null},
                  {"Mustek", "Linka B"},
                  {"Muzeum", "Linka C"},
                  {"Namesti Miru", null},
                  {"Jiriho z Podebrad", null},
                  {"Flora", null},
                  {"Zelivskeho", null},
                  {"Strasnicka", null},
                  {"Skalka", null},
                  {"Depo Hostivar", null}
              };
      
              String output = main.execute("/output \"Linka A\"");
              checkDepots(output);
      
              checkOutputLength(output, stations.length + 2);
              assertWithTransfer(output, stations);
      
              return CheckResult.correct();
          }
      
          // connections test
          @DynamicTest(order = 5)
          CheckResult connectLinesTest() {
      
              TestedProgram main = new TestedProgram();
              main.feedbackOnException(OutOfMemoryError.class, "Your program threw and OutOfMemoryError. Most likely it is related to the implementation of pathfinding algorithm.");
              main.start("./test/prague.json");
      
              String[][] stations = new String[][]{{"Nemocnice Motol", null}, {"Petriny", "Linka C"},
                  {"Nadrazi Veleslavin", null}, {"Borislavka", null}, {"Dejvicka", null}, {"Hradcanska", null},
                  {"Malostranska", null}, {"Staromestska", null}, {"Mustek", "Linka B"}, {"Muzeum", "Linka C"},
                  {"Namesti Miru", null}, {"Jiriho z Podebrad", null}, {"Flora", null}, {"Zelivskeho", null},
                  {"Strasnicka", null}, {"Skalka", null}, {"Depo Hostivar", null}
              };
              main.execute("/connect \"Linka C\" \"I.P.Pavlova\" \"Linka A\" \"Petriny\"");
      
              String output = main.execute("/output \"Linka A\"");
      
              checkDepots(output);
              checkOutputLength(output, stations.length + 2);
              assertWithTransfer(output, stations);
      
              return CheckResult.correct();
          }
      
          @DynamicTest(order = 6)
          CheckResult simpleRouteTest() {
              TestedProgram main = new TestedProgram();
              main.feedbackOnException(OutOfMemoryError.class, "Your program threw and OutOfMemoryError. Most likely it is related to the implementation of pathfinding algorithm.");
              main.start("./test/prague.json");
      
              String[] correctRoute = {"Petriny", "Nadrazi Veleslavin", "Borislavka", "Dejvicka", "Hradcanska", "Malostranska",
                  "Staromestska", "Mustek", "Muzeum", "Namesti Miru", "Jiriho z Podebrad", "Flora"};
      
              String[] sOutput = main.execute("/route \"Linka A\" \"Petriny\" \"Linka A\" \"Flora\"").toLowerCase().split("\n");
      
              if (sOutput.length != correctRoute.length) {
                  return CheckResult.wrong("Your program printed an incorrect number of stations in the route.\n" +
                      "Expected: " + correctRoute.length + " stations." +
                      "\nYour output: " + sOutput.length + " stations.");
              }
      
              for (int i = 0; i < correctRoute.length; i++) {
                  if (i == 0 && !correctRoute[i].equalsIgnoreCase(sOutput[i])) {
                      return CheckResult.wrong("The first station in the output should be '" + correctRoute[i] + "'.");
                  } else if (i != 0) {
                      if (!correctRoute[i].equalsIgnoreCase(sOutput[i])) {
                          return CheckResult.wrong("After '" + correctRoute[i - 1] + "' should be '" + correctRoute[i] + "'.");
                      }
                  }
              }
      
              return CheckResult.correct();
          }
      
          // advanced route test
          @DynamicTest(order = 7)
          CheckResult advancedRouteTest() {
              TestedProgram main = new TestedProgram();
              main.feedbackOnException(OutOfMemoryError.class, "Your program threw and OutOfMemoryError. Most likely it is related to the implementation of pathfinding algorithm.");
              main.start("./test/prague.json");
      
              String[] route = {"Vysehrad", "I.P.Pavlova", "Muzeum",
                  "Linka A", "Muzeum", "Mustek",
                  "Linka B", "Mustek", "Namesti Republiky"};
              String[] sOutput = main.execute("/route \"Linka C\" \"Vysehrad\" \"Linka B\" \"Namesti Republiky\"").split("\n");
      
              if (sOutput.length != 9) {
                  return CheckResult.wrong("Your program printed an incorrect number of stations in the route.");
              }
      
              int index = 0;
              for (String station : sOutput) {
                  if (!station.toLowerCase().trim().contains(route[index].toLowerCase())) {
                      return CheckResult.wrong("The route is incorrect. Wrong stations were displayed");
                  }
                  index++;
              }
      
              return CheckResult.correct();
          }
      
          // simple test with time
          @DynamicTest(order = 8)
          CheckResult simpleTime() {
              TestedProgram main = new TestedProgram();
              main.feedbackOnException(OutOfMemoryError.class, "Your program threw and OutOfMemoryError. Most likely it is related to the implementation of pathfinding algorithm.");
              main.start("./test/prague_w_time.json");
      
              String[] route = {"Borislavka", "Dejvicka", "Hradcanska", "Malostranska", "Staromestska", "Mustek", "Muzeum",
                  "Namesti Miru", "Jiriho z Podebrad", "Flora", "44"};
              String[] sOutput = main.execute("/fastest-route \"Linka A\" \"Borislavka\" \"Linka A\" \"Flora\"").split("\n");
      
              if (sOutput.length != route.length) {
                  return CheckResult.wrong("Your program printed an incorrect number of stations in the route. Expected 10 stations and the total time!");
              }
      
              int index = 0;
              for (String station : sOutput) {
                  if (!station.toLowerCase().trim().contains(route[index].toLowerCase())) {
                      return CheckResult.wrong("The route is incorrect. Wrong stations were displayed");
                  }
                  index++;
              }
      
              return CheckResult.correct();
          }
      
          // advanced test with time
          @DynamicTest(order = 9)
          CheckResult advancedTime() {
              TestedProgram main = new TestedProgram();
              main.feedbackOnException(OutOfMemoryError.class, "Your program threw and OutOfMemoryError. Most likely it is related to the implementation of pathfinding algorithm.");
              main.start("./test/prague_w_time.json");
      
              String[] route = {"Vysehrad", "I.P.Pavlova", "Muzeum", "Hlavni nadrazi", "Florenc",
                  "Linka B", "Florenc", "Namesti Republiky", "29"
              };
      
              String[] sOutput = main.execute("/fastest-route \"Linka C\" \"Vysehrad\" \"Linka B\" \"Namesti Republiky\"")
                  .split("\n");
      
              if (sOutput.length != 9) {
                  return CheckResult.wrong("Your program printed an incorrect number of stations in the route. Expected 8 stations and the total time!");
              }
      
              int index = 0;
              for (String station : sOutput) {
                  if (!station.toLowerCase().trim().contains(route[index].toLowerCase())) {
                      return CheckResult.wrong("The route is incorrect. Wrong stations were displayed");
                  }
                  index++;
              }
      
              return CheckResult.correct();
          }
      
          // checks for "depot" at the start and at the end
          void checkDepots(String output) {
              output = output.trim().toLowerCase();
              if (!output.startsWith("depot")) {
                  throw new WrongAnswer("Your output should start with 'depot'.");
              } else if (!output.endsWith("depot")) {
                  throw new WrongAnswer("Your output should end with 'depot'.");
              }
          }
      
          // checks number of stations in output
          void checkOutputLength(String output, int correctLength) {
              int length = output.trim().split("\n").length;
              if (length != correctLength) {
                  throw new WrongAnswer("You output contains wrong number of lines.\n" +
                      "Expected: " + correctLength + " lines\n" +
                      "Your output: " + length + " lines");
              }
          }
      
          // checks stations
          void assertStations(String output, String[] stations) {
      
              String[] sOutput = output.trim().split("\n");
      
              for (int i = 0; i < stations.length; i++) {
                  if (!sOutput[i + 1].equals(stations[i])) {
                      throw new WrongAnswer("Can't find station '" + stations[i] + "' in the line number " + (i + 2));
                  }
              }
          }
      
          void assertWithTransfer(String output, String[][] stations) {
      
              String[] sOutput = output.split("\n");
      
              for (int i = 0; i < stations.length; i++) {
                  String currentLine = sOutput[i + 1].toLowerCase().trim();
                  String currentStation = stations[i][0];
                  String currentTransfer = stations[i][1];
                  if (currentTransfer == null) {
                      if (!currentLine.equals(currentStation.toLowerCase())) {
                          throw new WrongAnswer("There is an error in your program's reply. Some stations were not found.");
                      }
                  } else if (!currentLine.contains(currentStation.toLowerCase()) ||
                      !currentLine.contains(currentTransfer.toLowerCase())) {
                      throw new WrongAnswer("Expected transfer to '" + currentTransfer + "' from '" + currentStation + "' station.");
                  }
              }
          }
      }
    learner_created: false
  - name: src/metro/Line.java
    visible: true
    text: |
      package metro;
      
      
      public class Line {
          private final String name;
          private Station firstDepot;
          private Station lastDepot;
          private Station firstStation;
          private Station lastStation;
      
          Line(String name) {
              this.name = name;
              this.firstDepot = new Station("depot", name, Integer.MIN_VALUE);
              this.lastDepot = new Station("depot", name, Integer.MAX_VALUE);
          }
      
          public String getName() {
              return name;
          }
      
          public void addStation(Station station) {
              if (firstStation == null) {
                  this.firstStation = station;
                  this.lastStation = station;
              } else if (firstStation.getOrder() > station.getOrder()) {
                  firstStation.addHeadStation(station);
                  firstStation = station;
              } else {
                  Station iter = firstStation;
                  while (iter.getOrder() < station.getOrder() && iter.getNext() != null) {
                      iter = iter.getNext();
                  }
      
                  if (iter.getOrder() != station.getOrder()) {
                      if (iter.getNext() == null) {
                          lastStation = station;
                      }
      
                      iter.addTailStation(station);
                  }
      
              }
          }
      
          public void addHeadStation(String stationName) {
              Station station = new Station(stationName, this.name, Integer.MIN_VALUE);
              firstStation.addHeadStation(station);
              firstStation = station;
          }
      
          public void addTailStation(String stationName) {
              Station station = new Station(stationName, this.name, Integer.MAX_VALUE);
              lastStation.addTailStation(station);
              lastStation = station;
          }
      
          public void removeStation(String stationName) {
              Station station = firstStation;
              boolean isFinish = false;
      
              while (station != null && !isFinish) {
                  if (station.getName().equals(stationName)) {
                      if (station == firstStation) {
                          firstStation = station.getNext();
                      } else if (station == lastStation) {
                          lastStation = station.getPrev();
                      }
      
                      station.remove();
                      isFinish = true;
                  }
              }
          }
      
          public void printLine() {
      
              Station station = null;
      
              if (this.firstDepot != null && this.lastStation != null) {
                  this.firstDepot.setNext(this.firstStation);
                  this.lastStation.setNext(this.lastDepot);
      
                  station = this.firstDepot;
              } else {
                  System.out.println("depot");
              }
      
      
      
              while (station != null) {
                  station.printStation();
                  station = station.getNext();
      
              }
      
              if (this.firstDepot != null && this.lastStation != null) {
                  this.firstDepot.setNext(null);
                  this.lastStation.setNext(null);
              }
          }
      
          public Station getStationInLine(String stationName) {
              Station station = this.firstStation;
      
              while (station != null) {
                  if (station.getName().equals(stationName)) {
                      return station;
                  }
      
                  station = station.getNext();
              }
      
              return null;
          }
      
      
      }
    learner_created: true
  - name: src/metro/MetroMap.java
    visible: true
    text: |
      package metro;
      
      import java.util.*;
      
      public class MetroMap {
      
          private  List<Line> lines;
      
          MetroMap() {
              lines = new ArrayList<>();
          }
      
          public Line getSafeLine(String lineName) {
              Line line = this.getLine(lineName);
              if (line == null) {
                  line = this.addLine(lineName);
              }
              return line;
          }
      
          private Line getLine(String lineName) {
              for (Line line : lines) {
                  if (lineName.equals(line.getName())) {
                      return line;
                  }
              }
      
              return null;
          }
      
          public Line addLine(String lineName) {
              Line line = new Line(lineName);
              this.lines.add(line);
              return line;
          }
          public void buildConnection(Map<Station, List<String>> mapStationTransfer) {
              for (Station station : mapStationTransfer.keySet()) {
                  List<String> values = mapStationTransfer.get(station);
                  for (String value : values) {
                      String[] lineAndStation = value.split("\\|");
                      this.getSafeLine(lineAndStation[1]).getStationInLine(lineAndStation[0]).connectStation(station);
                  }
      
              }
          }
      
          private Map<Station, Integer> searchRoute(Station srcStation,Station desStation) {
              Set<Station> visitedStation = new HashSet<>();
              Map<Station, Integer> mapDistance = new HashMap<>();
              Queue<Station> queue = new ArrayDeque<>();
      
              int distance = 0;
      
              visitedStation.add(srcStation);
              mapDistance.put(srcStation, distance);
              queue.add(srcStation);
      
      
              while (!queue.isEmpty()) {
                  Station processStation = queue.poll();
      
                  if (processStation == desStation) {
                      break;
                  }
      
                  distance = mapDistance.get(processStation) + 1;
      
                  List<Station> allNeighbor = processStation.getNeighbor();
      
                  for (Station neighbor : allNeighbor) {
                      if (visitedStation.contains(neighbor)) {
                          continue;
                      }
      
                      visitedStation.add(neighbor);
                      queue.offer(neighbor);
                      mapDistance.put(neighbor, distance);
                  }
              }
      
              return mapDistance;
          }
      
          public void printRoute(String srcLineName, String srcStationName, String desLineName, String desStationName) {
              Station srcStation = this.getSafeLine(srcLineName).getStationInLine(srcStationName);
              Station desStation = this.getSafeLine(desLineName).getStationInLine(desStationName);
      
              Map<Station, Integer> mapDistance = this.searchRoute(srcStation, desStation);
      
      
              Stack<String> stackRoute = new Stack<>();
              stackRoute.push(desStationName);
      
              int distance = mapDistance.get(desStation);
              Station processStation = desStation;
      
              while (distance >= 0) {
                  distance = distance - 1;
      
                  List<Station> allNeighbor = processStation.getNeighbor();
      
                  for (Station neighbor : allNeighbor) {
                      Integer distanceNeighbor = mapDistance.get(neighbor);
      
                      if (distanceNeighbor == null || distanceNeighbor != distance) {
                          continue;
                      }
      
      
                      if (!neighbor.getLineName().equals(processStation.getLineName())) {
                          stackRoute.push(String.join("","Transition to line ",processStation.getLineName()));
                      }
      
                      stackRoute.push(neighbor.getName());
                      processStation = neighbor;
                      break;
                  }
              }
      
      
      
              while (!stackRoute.isEmpty()) {
                  System.out.println(stackRoute.pop());
              }
          }
      
          public void buildConnection(String lineName1, String stationName1, String lineName2, String stationName2) {
              this.getSafeLine(lineName1).getStationInLine(stationName1).connectStation(this.getSafeLine(lineName2).getStationInLine(stationName2));
          }
      
          public boolean isEmpty() {
              return lines.isEmpty();
          }
      }
    learner_created: true
  - name: src/metro/Station.java
    visible: true
    text: |
      package metro;
      
      import java.util.ArrayList;
      import java.util.List;
      
      public class Station {
      
          private Station prev = null;
          private Station next = null;
          private final String name;
          private final String lineName;
          private final int order;
      
          private List<Station> transferStations;
      
          Station(String name, String lineName, int order) {
              this.lineName = lineName;
              this.name = name;
              this.order = order;
              this.transferStations = new ArrayList<>();
          }
      
          public String getName() {
              return name;
          }
      
          public String getLineName() {
              return lineName;
          }
      
          public int getOrder() {
              return order;
          }
      
          public void setNext(Station next) {
              this.next = next;
          }
      
          public void setPrev(Station prev) {
              this.prev = prev;
          }
      
          public Station getNext() {
              return next;
          }
      
          public Station getPrev() {
              return prev;
          }
      
          public void addTailStation(Station station) {
              station.setNext(this.next);
              this.next = station;
              station.setPrev(this);
      
              if (station.getNext() != null) {
                  station.getNext().setPrev(station);
              }
          }
      
          public void addHeadStation(Station station) {
              this.prev = station;
              station.setNext(this);
          }
      
          public List<Station> getNeighbor() {
              List<Station> res = new ArrayList<>();
      
              if (this.getNext() != null) {
                  res.add(this.getNext());
              }
      
              if (this.getPrev() != null) {
                  res.add(this.getPrev());
              }
      
              res.addAll(this.transferStations);
      
              return res;
          }
      
          public void remove() {
              if (this.prev != null) {
                  this.prev.setNext(this.next);
              }
      
              if (this.next != null) {
                  this.next.setPrev(this.prev);
              }
          }
      
          private boolean isConnectedStation(Station newStation) {
              for (Station station : this.transferStations) {
                  if (station == newStation) {
                      return true;
                  }
              }
      
              return false;
          }
      
          public void connectStation(Station station) {
              if (this.isConnectedStation(station)) {
                  return;
              }
      
              this.transferStations.add(station);
              station.connectStation(this);
          }
      
          public void printStation() {
              System.out.print(this.getName());
      
              for (Station station : this.transferStations) {
                  System.out.printf(" - %s (%s line)", station.getName(), station.getLineName());
              }
      
              System.out.println();
          }
      
      
      
      }
    learner_created: true
feedback_link: https://hyperskill.org/learn/step/10345#comment
status: Solved
feedback:
  message: Congratulations!
  time: "Mon, 25 Dec 2023 12:01:34 UTC"
record: 5
